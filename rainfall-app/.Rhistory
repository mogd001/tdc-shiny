shiny::runApp()
runApp()
source("../../my-utils/get_data_hilltopserver.R")
#source("utils/get_data_hilltopserver.R")
rainfall <- get_data_hilltop_server(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2022-01-01", to = "", interval = "1 month", alignment = "00:00") %>%
rename(rainfall = value)
rainfall
rainfall %>% mutate(dateteime = datetime - months(1))
test <- rainfall %>% mutate(datetime2 = datetime - months(1))
unique(test$datetime2)
monthly_rainfall <- rainfall %>%
group_by(site, year_month) %>%
summarise(rainfall_total = round(sum(rainfall, na.rm = TRUE), 2)) %>%
mutate(month = month(year_month, label = TRUE),
year = year(year_month)) %>%
ungroup() %>%
left_join(sites, by = "site") %>%
filter(!is.na(year) | !is.na(month))
sites <- get_sites_hilltop_server()
monthly_rainfall <- rainfall %>%
group_by(site, year_month) %>%
summarise(rainfall_total = round(sum(rainfall, na.rm = TRUE), 2)) %>%
mutate(month = month(year_month, label = TRUE),
year = year(year_month)) %>%
ungroup() %>%
left_join(sites, by = "site") %>%
filter(!is.na(year) | !is.na(month))
monthly_rainfall
drop_na(monthly_rainfall)
monthly_rainfall <- rainfall %>%
group_by(site, year_month) %>%
summarise(rainfall_total = round(sum(rainfall, na.rm = TRUE), 2)) %>%
mutate(month = month(year_month, label = TRUE),
year = year(year_month)) %>%
ungroup() %>%
left_join(sites, by = "site") %>%
filter(!is.na(year) | !is.na(month))
monthly_rainfall
rainfall <- get_data_hilltop_server(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2022-01-01", to = "", interval = "1 month", alignment = "00:00") %>%
rename(rainfall = value)
shiny::runApp()
monthly_rainfall
monthly_rainfall <- rainfall_df %>%
group_by(site, year_month) %>%
summarise(rainfall_total = round(sum(rainfall, na.rm = TRUE), 2)) %>%
mutate(month = month(year_month, label = TRUE),
year = year(year_month)) %>%
ungroup() %>%
left_join(sites, by = "site") %>%
filter(!is.na(year) | !is.na(month))
library(dplyr) # for data manipulation
library(lubridate) # for converting dates
library(shiny) # for interactivity
library(leaflet) # for mapping
# Load data
#source("../../my-utils/get_data_hilltopserver.R")
source("utils/get_data_hilltopserver.R")
rainfall_df <- get_data_hilltop_server(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2021-01-01", to = "", interval = "1 month", alignment = "00:00") %>%
rename(rainfall = value) %>%
group_by(site) %>%
arrange(datetime) %>%
slice(-1) %>%
ungroup() %>%
drop_na()
sites <- get_sites_hilltop_server()
# summarise monthly rainfall
monthly_rainfall <- rainfall_df %>%
group_by(site, year_month) %>%
summarise(rainfall_total = round(sum(rainfall, na.rm = TRUE), 2)) %>%
mutate(month = month(year_month, label = TRUE),
year = year(year_month)) %>%
ungroup() %>%
left_join(sites, by = "site") %>%
filter(!is.na(year) | !is.na(month))
monthly_rainfal
monthly_rainfall
monthly %>%       group_by(site, latitude, longitude) %>%
summarise(rainfall_total = round(sum(rainfall_total, na.rm = TRUE), 2)) %>%
ungroup()
monthly_rainfall %>%       group_by(site, latitude, longitude) %>%
summarise(rainfall_total = round(sum(rainfall_total, na.rm = TRUE), 2)) %>%
ungroup()
runApp()
runApp()
rsconnect::deployApp()
library(dplyr) # for data manipulation
library(lubridate) # for converting dates
library(shiny) # for interactivity
library(leaflet) # for mapping
library(tdcR)
site_choices <- get_collections() %>%
filter(collection == "Rainfall") %>%
arrange(site) %>%
pull(site)
site_choices
rainfall_df <- get_data_hilltop_server(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2022-07-12", to = "", interval = "25 mins", alignment = "00:00") %>%
rename(rainfall = value) %>%
group_by(site) %>%
arrange(datetime) %>%
slice(-1) %>%
ungroup() %>%
drop_na()
library(dplyr) # for data manipulation
library(lubridate) # for converting dates
library(shiny) # for interactivity
library(leaflet) # for mapping
library(tdcR)
rainfall_df <- get_data_hilltop_server(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2022-07-12", to = "", interval = "25 mins", alignment = "00:00") %>%
rename(rainfall = value) %>%
group_by(site) %>%
arrange(datetime) %>%
slice(-1) %>%
ungroup() %>%
drop_na()
rainfall_df <- get_data_hilltop_server(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2022-07-12", to = "", interval = "25 mins", alignment = "00:00") %>%
rename(rainfall = value)
rainfall_df <- get_data(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2022-07-12", to = "", interval = "25 mins", alignment = "00:00") %>%
rename(rainfall = value) %>%
group_by(site) %>%
arrange(datetime) %>%
slice(-1) %>%
ungroup() %>%
drop_na()
rainfall_df <- get_data(collection = "Rainfall", method = "Total", time_interval = NULL, from = "2022-07-12", to = "", interval = "25 mins", alignment = "00:00") %>%
rename(rainfall = value) %>%
group_by(site) %>%
arrange(datetime) %>%
slice(-1) %>%
ungroup()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?addTiles
runApp()
library(rsconnect)
rsconnect::deployApp()
library(rsconnect)
rsconnect::deployApp()
library(rsconnect)
rsconnect::deployApp()
